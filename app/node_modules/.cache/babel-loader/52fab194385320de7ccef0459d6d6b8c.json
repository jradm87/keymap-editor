{"ast":null,"code":"import _toConsumableArray from\"/home/runner/work/keymap-editor/keymap-editor/app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import pick from'lodash/pick';import{useMemo}from'react';import Key from'./Keys/Key';import{jsx as _jsx}from\"react/jsx-runtime\";var position=function position(key){return pick(key,['x','y']);};var rotation=function rotation(key){var rx=key.rx,ry=key.ry,r=key.r;return{x:rx,y:ry,a:r};};var size=function size(key){var _key$w=key.w,w=_key$w===void 0?1:_key$w,_key$u=key.u,u=_key$u===void 0?w:_key$u,_key$h=key.h,h=_key$h===void 0?1:_key$h;return{u:u,h:h};};function KeyboardLayout(props){var layout=props.layout,bindings=props.bindings,onUpdate=props.onUpdate;var normalized=layout.map(function(_,i){return bindings[i]||{value:'&none',params:[]};});var handleUpdateBind=useMemo(function(){return function(keyIndex,updateBinding){onUpdate([].concat(_toConsumableArray(normalized.slice(0,keyIndex)),[updateBinding],_toConsumableArray(normalized.slice(keyIndex+1))));};},[normalized,onUpdate]);return/*#__PURE__*/_jsx(\"div\",{style:{position:'relative'},children:layout.map(function(key,i){return/*#__PURE__*/_jsx(Key,{position:position(key),rotation:rotation(key),size:size(key),label:key.label,value:normalized[i].value,params:normalized[i].params,onUpdate:function onUpdate(bind){return handleUpdateBind(i,bind);}},i);})});}export default KeyboardLayout;","map":{"version":3,"names":["pick","useMemo","Key","position","key","rotation","rx","ry","r","x","y","a","size","w","u","h","KeyboardLayout","props","layout","bindings","onUpdate","normalized","map","_","i","value","params","handleUpdateBind","keyIndex","updateBinding","slice","label","bind"],"sources":["/home/runner/work/keymap-editor/keymap-editor/app/src/Keyboard/KeyboardLayout.js"],"sourcesContent":["import pick from 'lodash/pick'\nimport PropTypes from 'prop-types'\nimport { useMemo } from 'react'\n\nimport Key from './Keys/Key'\n\nconst position = key => pick(key, ['x', 'y'])\nconst rotation = key => {\n  const { rx, ry, r } = key\n  return { x: rx, y: ry, a: r }\n}\nconst size = key => {\n  const { w = 1, u = w, h = 1 } = key\n  return { u, h }\n}\n\nfunction KeyboardLayout(props) {\n  const { layout, bindings, onUpdate } = props\n  const normalized = layout.map((_, i) => (\n    bindings[i] || {\n      value: '&none',\n      params: []\n    }\n  ))\n\n  const handleUpdateBind = useMemo(() => function(keyIndex, updateBinding) {\n    onUpdate([\n      ...normalized.slice(0, keyIndex),\n      updateBinding,\n      ...normalized.slice(keyIndex + 1)\n    ])\n  }, [normalized, onUpdate])\n\n  return (\n    <div style={{ position: 'relative' }}>\n      {layout.map((key, i) => (\n        <Key\n          key={i}\n          position={position(key)}\n          rotation={rotation(key)}\n          size={size(key)}\n          label={key.label}\n          value={normalized[i].value}\n          params={normalized[i].params}\n          onUpdate={bind => handleUpdateBind(i, bind)}\n        />\n      ))}\n    </div>\n  )\n}\n\nKeyboardLayout.propTypes = {\n  layout: PropTypes.array.isRequired,\n  bindings: PropTypes.array.isRequired,\n  onUpdate: PropTypes.func.isRequired\n}\n\nexport default KeyboardLayout\n"],"mappings":"+IAAA,MAAOA,CAAAA,IAAP,KAAiB,aAAjB,CAEA,OAASC,OAAT,KAAwB,OAAxB,CAEA,MAAOC,CAAAA,GAAP,KAAgB,YAAhB,C,2CAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAAAC,GAAG,QAAIJ,CAAAA,IAAI,CAACI,GAAD,CAAM,CAAC,GAAD,CAAM,GAAN,CAAN,CAAR,EAApB,CACA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAAAD,GAAG,CAAI,CACtB,GAAQE,CAAAA,EAAR,CAAsBF,GAAtB,CAAQE,EAAR,CAAYC,EAAZ,CAAsBH,GAAtB,CAAYG,EAAZ,CAAgBC,CAAhB,CAAsBJ,GAAtB,CAAgBI,CAAhB,CACA,MAAO,CAAEC,CAAC,CAAEH,EAAL,CAASI,CAAC,CAAEH,EAAZ,CAAgBI,CAAC,CAAEH,CAAnB,CAAP,CACD,CAHD,CAIA,GAAMI,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,CAAAR,GAAG,CAAI,CAClB,WAAgCA,GAAhC,CAAQS,CAAR,CAAQA,CAAR,iBAAY,CAAZ,eAAgCT,GAAhC,CAAeU,CAAf,CAAeA,CAAf,iBAAmBD,CAAnB,eAAgCT,GAAhC,CAAsBW,CAAtB,CAAsBA,CAAtB,iBAA0B,CAA1B,QACA,MAAO,CAAED,CAAC,CAADA,CAAF,CAAKC,CAAC,CAADA,CAAL,CAAP,CACD,CAHD,CAKA,QAASC,CAAAA,cAAT,CAAwBC,KAAxB,CAA+B,CAC7B,GAAQC,CAAAA,MAAR,CAAuCD,KAAvC,CAAQC,MAAR,CAAgBC,QAAhB,CAAuCF,KAAvC,CAAgBE,QAAhB,CAA0BC,QAA1B,CAAuCH,KAAvC,CAA0BG,QAA1B,CACA,GAAMC,CAAAA,UAAU,CAAGH,MAAM,CAACI,GAAP,CAAW,SAACC,CAAD,CAAIC,CAAJ,QAC5BL,CAAAA,QAAQ,CAACK,CAAD,CAAR,EAAe,CACbC,KAAK,CAAE,OADM,CAEbC,MAAM,CAAE,EAFK,CADa,EAAX,CAAnB,CAOA,GAAMC,CAAAA,gBAAgB,CAAG1B,OAAO,CAAC,iBAAM,UAAS2B,QAAT,CAAmBC,aAAnB,CAAkC,CACvET,QAAQ,8BACHC,UAAU,CAACS,KAAX,CAAiB,CAAjB,CAAoBF,QAApB,CADG,GAENC,aAFM,qBAGHR,UAAU,CAACS,KAAX,CAAiBF,QAAQ,CAAG,CAA5B,CAHG,GAAR,CAKD,CANgC,EAAD,CAM7B,CAACP,UAAD,CAAaD,QAAb,CAN6B,CAAhC,CAQA,mBACE,YAAK,KAAK,CAAE,CAAEjB,QAAQ,CAAE,UAAZ,CAAZ,UACGe,MAAM,CAACI,GAAP,CAAW,SAAClB,GAAD,CAAMoB,CAAN,qBACV,KAAC,GAAD,EAEE,QAAQ,CAAErB,QAAQ,CAACC,GAAD,CAFpB,CAGE,QAAQ,CAAEC,QAAQ,CAACD,GAAD,CAHpB,CAIE,IAAI,CAAEQ,IAAI,CAACR,GAAD,CAJZ,CAKE,KAAK,CAAEA,GAAG,CAAC2B,KALb,CAME,KAAK,CAAEV,UAAU,CAACG,CAAD,CAAV,CAAcC,KANvB,CAOE,MAAM,CAAEJ,UAAU,CAACG,CAAD,CAAV,CAAcE,MAPxB,CAQE,QAAQ,CAAE,kBAAAM,IAAI,QAAIL,CAAAA,gBAAgB,CAACH,CAAD,CAAIQ,IAAJ,CAApB,EARhB,EACOR,CADP,CADU,EAAX,CADH,EADF,CAgBD,CAQD,cAAeR,CAAAA,cAAf"},"metadata":{},"sourceType":"module"}