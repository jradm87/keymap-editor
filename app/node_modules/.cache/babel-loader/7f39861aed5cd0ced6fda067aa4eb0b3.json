{"ast":null,"code":"import _objectSpread from\"/home/runner/work/keymap-editor/keymap-editor/app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/runner/work/keymap-editor/keymap-editor/app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import Modal from'./Modal';import Spinner from'./Spinner';import{jsx as _jsx}from\"react/jsx-runtime\";function Loader(props){var load=props.load,delay=props.delay,children=props.children;var _useState=useState({loaded:false,delayed:false,timeout:null}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];useEffect(function(){clearTimeout(state.timeout);if(!load){return;}var timeout=setTimeout(function(){if(!state.loaded){setState(_objectSpread(_objectSpread({},state),{},{timeout:null,delayed:true}));}},delay);setState({loaded:false,delayed:false,timeout:timeout});load().then(function(){clearTimeout(timeout);setState(_objectSpread(_objectSpread({},state),{},{timeout:null,loaded:true}));});},[load]);if(state.loaded){return children;}else if(!state.delayed){return null;}return/*#__PURE__*/_jsx(Modal,{children:/*#__PURE__*/_jsx(Spinner,{style:{color:'white'},children:/*#__PURE__*/_jsx(\"p\",{children:\"Waiting for API...\"})})});}Loader.defaultProps={inline:false,delay:200};export default Loader;","map":{"version":3,"names":["useEffect","useState","Modal","Spinner","Loader","props","load","delay","children","loaded","delayed","timeout","state","setState","clearTimeout","setTimeout","then","color","defaultProps","inline"],"sources":["/home/runner/work/keymap-editor/keymap-editor/app/src/Common/Loader.js"],"sourcesContent":["import PropTypes from 'prop-types'\nimport { useEffect, useState } from 'react'\n\nimport Modal from './Modal'\nimport Spinner from './Spinner'\n\nfunction Loader(props) {\n  const { load, delay, children } = props\n  const [state, setState] = useState({\n    loaded: false,\n    delayed: false,\n    timeout: null\n  })\n\n  useEffect(() => {\n    clearTimeout(state.timeout)\n    if (!load) {\n      return\n    }\n\n    const timeout = setTimeout(() => {\n      if (!state.loaded) {\n        setState({ ...state, timeout: null, delayed: true })\n      }\n    }, delay)\n\n    setState({\n      loaded: false,\n      delayed: false,\n      timeout\n    })\n\n    load().then(() => {\n      clearTimeout(timeout)\n      setState({ ...state, timeout: null, loaded: true })\n    })\n  }, [load])\n\n  if (state.loaded) {\n    return children\n  } else if (!state.delayed) {\n    return null\n  }\n\n  return (\n    <Modal>\n      <Spinner style={{ color: 'white' }}>\n        <p>Waiting for API...</p>\n      </Spinner>\n    </Modal>\n  )\n}\n\nLoader.propTypes = {\n  load: PropTypes.func.isRequired,\n  inline: PropTypes.bool,\n  delay: PropTypes.number,\n}\n\nLoader.defaultProps = {\n  inline: false,\n  delay: 200\n}\n\nexport default Loader\n"],"mappings":"6QACA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CAEA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,C,2CAEA,QAASC,CAAAA,MAAT,CAAgBC,KAAhB,CAAuB,CACrB,GAAQC,CAAAA,IAAR,CAAkCD,KAAlC,CAAQC,IAAR,CAAcC,KAAd,CAAkCF,KAAlC,CAAcE,KAAd,CAAqBC,QAArB,CAAkCH,KAAlC,CAAqBG,QAArB,CACA,cAA0BP,QAAQ,CAAC,CACjCQ,MAAM,CAAE,KADyB,CAEjCC,OAAO,CAAE,KAFwB,CAGjCC,OAAO,CAAE,IAHwB,CAAD,CAAlC,wCAAOC,KAAP,eAAcC,QAAd,eAMAb,SAAS,CAAC,UAAM,CACdc,YAAY,CAACF,KAAK,CAACD,OAAP,CAAZ,CACA,GAAI,CAACL,IAAL,CAAW,CACT,OACD,CAED,GAAMK,CAAAA,OAAO,CAAGI,UAAU,CAAC,UAAM,CAC/B,GAAI,CAACH,KAAK,CAACH,MAAX,CAAmB,CACjBI,QAAQ,gCAAMD,KAAN,MAAaD,OAAO,CAAE,IAAtB,CAA4BD,OAAO,CAAE,IAArC,GAAR,CACD,CACF,CAJyB,CAIvBH,KAJuB,CAA1B,CAMAM,QAAQ,CAAC,CACPJ,MAAM,CAAE,KADD,CAEPC,OAAO,CAAE,KAFF,CAGPC,OAAO,CAAPA,OAHO,CAAD,CAAR,CAMAL,IAAI,GAAGU,IAAP,CAAY,UAAM,CAChBF,YAAY,CAACH,OAAD,CAAZ,CACAE,QAAQ,gCAAMD,KAAN,MAAaD,OAAO,CAAE,IAAtB,CAA4BF,MAAM,CAAE,IAApC,GAAR,CACD,CAHD,EAID,CAtBQ,CAsBN,CAACH,IAAD,CAtBM,CAAT,CAwBA,GAAIM,KAAK,CAACH,MAAV,CAAkB,CAChB,MAAOD,CAAAA,QAAP,CACD,CAFD,IAEO,IAAI,CAACI,KAAK,CAACF,OAAX,CAAoB,CACzB,MAAO,KAAP,CACD,CAED,mBACE,KAAC,KAAD,wBACE,KAAC,OAAD,EAAS,KAAK,CAAE,CAAEO,KAAK,CAAE,OAAT,CAAhB,uBACE,yCADF,EADF,EADF,CAOD,CAQDb,MAAM,CAACc,YAAP,CAAsB,CACpBC,MAAM,CAAE,KADY,CAEpBZ,KAAK,CAAE,GAFa,CAAtB,CAKA,cAAeH,CAAAA,MAAf"},"metadata":{},"sourceType":"module"}