{"ast":null,"code":"import _toConsumableArray from\"/home/runner/work/keymap-editor/keymap-editor/app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import map from'lodash/map';var DEFAULT_SIZE=65;var DEFAULT_PADDING=5;export function getComputedParams(position,size){var rotation=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return{x:position.x*(DEFAULT_SIZE+DEFAULT_PADDING),y:position.y*(DEFAULT_SIZE+DEFAULT_PADDING),u:size.u*DEFAULT_SIZE+DEFAULT_PADDING*(size.u-1),h:size.h*DEFAULT_SIZE+DEFAULT_PADDING*(size.h-1),rx:(position.x-(rotation.x||position.x))*-(DEFAULT_SIZE+DEFAULT_PADDING),ry:(position.y-(rotation.y||position.y))*-(DEFAULT_SIZE+DEFAULT_PADDING),a:rotation.a||0};}export function getKeyStyles(position,size,rotation){var _getComputedParams=getComputedParams(position,size,rotation),x=_getComputedParams.x,y=_getComputedParams.y,u=_getComputedParams.u,h=_getComputedParams.h,a=_getComputedParams.a,rx=_getComputedParams.rx,ry=_getComputedParams.ry;return{top:\"\".concat(y,\"px\"),left:\"\".concat(x,\"px\"),width:\"\".concat(u,\"px\"),height:\"\".concat(h,\"px\"),transformOrigin:\"\".concat(rx,\"px \").concat(ry,\"px\"),transform:\"rotate(\".concat(a||0,\"deg)\")};}export function getKeyBoundingBox(position,size,rotation){var _getComputedParams2=getComputedParams(position,size,rotation),x=_getComputedParams2.x,y=_getComputedParams2.y,u=_getComputedParams2.u,h=_getComputedParams2.h,a=_getComputedParams2.a,rx=_getComputedParams2.rx,ry=_getComputedParams2.ry;var points=[{x:0,y:0},{x:u,y:0},{x:u,y:h},{x:0,y:h}];function translate(point){return{x:point.x+x,y:point.y+y};}function rotate(point){var x=point.x-rx;var y=point.y-ry;var angle=Math.PI*a/180;return{x:rx+x*Math.cos(angle)-y*Math.sin(angle),y:ry+y*Math.cos(angle)+x*Math.sin(angle)};}var transformed=points.map(rotate).map(translate);var xValues=map(transformed,'x');var yValues=map(transformed,'y');var min={x:Math.min.apply(Math,_toConsumableArray(xValues)),y:Math.min.apply(Math,_toConsumableArray(yValues))};var max={x:Math.max.apply(Math,_toConsumableArray(xValues)),y:Math.max.apply(Math,_toConsumableArray(yValues))};return{min:min,max:max};}","map":{"version":3,"names":["map","DEFAULT_SIZE","DEFAULT_PADDING","getComputedParams","position","size","rotation","x","y","u","h","rx","ry","a","getKeyStyles","top","left","width","height","transformOrigin","transform","getKeyBoundingBox","points","translate","point","rotate","angle","Math","PI","cos","sin","transformed","xValues","yValues","min","max"],"sources":["/home/runner/work/keymap-editor/keymap-editor/app/src/key-units.js"],"sourcesContent":["import map from 'lodash/map'\n\nconst DEFAULT_SIZE = 65;\nconst DEFAULT_PADDING = 5;\n\nexport function getComputedParams (position, size, rotation = {}) {\n  return {\n    x: position.x * (DEFAULT_SIZE + DEFAULT_PADDING),\n    y: position.y * (DEFAULT_SIZE + DEFAULT_PADDING),\n    u: size.u * DEFAULT_SIZE + DEFAULT_PADDING * (size.u - 1),\n    h: size.h * DEFAULT_SIZE + DEFAULT_PADDING * (size.h - 1),\n    rx: (position.x - (rotation.x || position.x)) * -(DEFAULT_SIZE + DEFAULT_PADDING),\n    ry: (position.y - (rotation.y || position.y)) * -(DEFAULT_SIZE + DEFAULT_PADDING),\n    a: rotation.a || 0\n  }\n}\n\nexport function getKeyStyles (position, size, rotation) {\n  const { x, y, u, h, a, rx, ry } = getComputedParams (position, size, rotation)\n\n  return {\n    top: `${y}px`,\n    left: `${x}px`,\n    width: `${u}px`,\n    height: `${h}px`,\n    transformOrigin: `${rx}px ${ry}px`,\n    transform: `rotate(${a || 0}deg)`\n  }\n}\n\nexport function getKeyBoundingBox(position, size, rotation) {\n  const { x, y, u, h, a, rx, ry } = getComputedParams(position, size, rotation)\n\n  const points = [\n    { x: 0, y: 0 },\n    { x: u, y: 0 },\n    { x: u, y: h },\n    { x: 0, y: h }\n  ]\n\n  function translate(point) {\n    return {\n      x: point.x + x,\n      y: point.y + y\n    }\n  }\n\n  function rotate(point) {\n    const x = point.x - rx\n    const y = point.y - ry\n    const angle = Math.PI * a / 180\n\n    return {\n      x: rx + x * Math.cos(angle) - y * Math.sin(angle),\n      y: ry + y * Math.cos(angle) + x * Math.sin(angle)\n    }\n  }\n\n  const transformed = points.map(rotate).map(translate)\n  const xValues = map(transformed, 'x')\n  const yValues = map(transformed, 'y')\n  const min = {\n    x: Math.min(...xValues),\n    y: Math.min(...yValues)\n  }\n  const max = {\n    x: Math.max(...xValues),\n    y: Math.max(...yValues)\n  }\n\n  return { min, max }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}